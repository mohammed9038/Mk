{%- comment %}<locksmith:7f22>{% endcomment -%}
  {%- assign locksmith_72e4_product__available = false %}{% assign locksmith_72e4_product__price = nil %}{% assign locksmith_72e4_product__price_min = nil %}{% assign locksmith_72e4_product__price_max = nil %}{% assign locksmith_72e4_product__price_varies = false %}{% assign locksmith_72e4_product__compare_at_price = nil %}{% assign locksmith_72e4_product__compare_at_price_min = nil %}{% assign locksmith_72e4_product__compare_at_price_max = nil %}{% assign locksmith_72e4_product__compare_at_price_varies = false %}{% for variant in product.variants %}{% capture var %}{% render 'locksmith-variables', scope: 'subject', subject: variant, subject_parent: product, variable: 'transparent' %}{% endcapture %}{% if var == "true" %}{% else %}{% continue %}{% endif %}{% if locksmith_72e4_product__available == false and variant.available %}{% assign locksmith_72e4_product__available = true %}{% endif %}{% if locksmith_72e4_product__price == nil %}{% assign locksmith_72e4_product__price = variant.price %}{% endif %}{% if locksmith_72e4_product__price_min == nil or variant.price < locksmith_72e4_product__price_min %}{% assign locksmith_72e4_product__price_min = variant.price %}{% endif %}{% if locksmith_72e4_product__price_max == nil or locksmith_72e4_product__price_max < variant.price %}{% assign locksmith_72e4_product__price_max = variant.price %}{% endif %}{% if locksmith_72e4_product__compare_at_price == nil %}{% assign locksmith_72e4_product__compare_at_price = variant.compare_at_price %}{% endif %}{% if locksmith_72e4_product__compare_at_price_min == nil or variant.compare_at_price < locksmith_72e4_product__compare_at_price_min %}{% assign locksmith_72e4_product__compare_at_price_min = variant.compare_at_price %}{% endif %}{% if locksmith_72e4_product__compare_at_price_max == nil or locksmith_72e4_product__compare_at_price_max < variant.compare_at_price %}{% assign locksmith_72e4_product__compare_at_price_max = variant.compare_at_price %}{% endif %}{% endfor %}{% if locksmith_72e4_product__price_min != locksmith_72e4_product__price_max %}{% assign locksmith_72e4_product__price_varies = true %}{% endif %}{% if locksmith_72e4_product__compare_at_price_min != locksmith_72e4_product__compare_at_price_max %}{% assign locksmith_72e4_product__compare_at_price_varies = true %}{% endif %}{% assign _72e4_safe_options = product.options | json %}{% assign _72e4_unsafe_options = product.options | json %}{% for _option in product.options %}{% assign _safe_values = '' %}{% for _value in _option.values %}{% capture var %}{% render 'locksmith-variables', scope: 'subject', subject: _value, subject_parent: _option, variable: 'transparent' %}{% endcapture %}{% if var == "true" %}{% else %}{% continue %}{% endif %}{% capture _safe_values %}{% if _safe_values != blank %}{{ _safe_values }},{% endif %}{{ _value | json }}{% endcapture %}{% endfor %}{% capture _safe_values %}[{{ _safe_values }}]{% endcapture %}{% assign _unsafe_values = _option.values | json %}{% assign _unsafe_option = _option | json %}{% assign _safe_option = _unsafe_option | replace: _unsafe_values, _safe_values %}{% assign _72e4_safe_options = _72e4_safe_options | replace: _unsafe_option, _safe_option %}{% endfor %}{% assign _72e4_unsafe_options = product.options | json -%}
{%- comment %}</locksmith:7f22>{% endcomment -%}

{%- comment -%}
    Create localized product json string
{%- endcomment -%}

{%- capture json -%}
    {%- if product -%}
        {
            "id": {{ product.id | json }},
            "title": {{ product.title | json }},
            "handle": {{ product.handle | json }},
            "description": {{ product.description | json }},
            "published_at": {{ product.published_at | date: "%FT%T%:z" | json }},
            "created_at": {{ product.created_at | date: "%FT%T%:z" | json }},
            "vendor": {{ product.vendor | json }},
            "type": {{ product.vendor | json }},
            "tags": {%- capture tagsString -%}{%- render "ls-tags", resource: product, tags: product.tags -%}{%- endcapture -%}{{ tagsString | split: "," | json }},
            "price": {{ locksmith_72e4_product__price | json }},
            "price_min": {{ locksmith_72e4_product__price_min | json }},
            "price_max": {{ locksmith_72e4_product__price_max | json }},
            "available": {{ locksmith_72e4_product__available | json }},
            "price_varies": {{ locksmith_72e4_product__price_varies | json }},
            "compare_at_price": {{ locksmith_72e4_product__compare_at_price | json }},
            "compare_at_price_min": {{ locksmith_72e4_product__compare_at_price_min | json }},
            "compare_at_price_max": {{ locksmith_72e4_product__compare_at_price_max | json }},
            "compare_at_price_varies": {{ locksmith_72e4_product__compare_at_price_varies | json }},
            "variants": [
                {%- comment %}<locksmith:7854>{% endcomment -%}
                  {%- assign locksmith_9beb_forloop__size = 0 %}{%- for variant in product.variants -%}{% capture var %}{% render 'locksmith-variables', scope: 'subject', subject: variant, subject_parent: product, variable: 'transparent' %}{% endcapture %}{% if var == 'true' %}{% assign locksmith_9beb_forloop__size = locksmith_9beb_forloop__size | plus: 1 %}{% endif %}{% endfor %}{% assign locksmith_9beb_forloop__index = nil -%}
                {%- comment %}</locksmith:7854>{% endcomment -%}
                {%- for variant in product.variants -%}
                    {%- comment %}<locksmith:f474>{% endcomment -%}
                      {%- capture var %}{% render 'locksmith-variables', scope: 'subject', subject: variant, subject_parent: product, variable: 'transparent' %}{% endcapture %}{% if var == "true" %}{% if locksmith_9beb_forloop__index == nil %}{% assign locksmith_9beb_forloop__index = 1 %}{% assign locksmith_9beb_forloop__index0 = 0 %}{% else %}{% assign locksmith_9beb_forloop__index = locksmith_9beb_forloop__index | plus: 1 %}{% assign locksmith_9beb_forloop__index0 = locksmith_9beb_forloop__index0 | plus: 1 %}{% endif %}{% if locksmith_9beb_forloop__index == 1 %}{% assign locksmith_9beb_forloop__first = true %}{% else %}{% assign locksmith_9beb_forloop__first = false %}{% endif %}{% if locksmith_9beb_forloop__index == locksmith_9beb_forloop__size %}{% assign locksmith_9beb_forloop__last = true %}{% else %}{% assign locksmith_9beb_forloop__last = false %}{% endif %}{% assign locksmith_9beb_forloop__rindex = locksmith_9beb_forloop__size | minus: locksmith_9beb_forloop__index | minus: 1 %}{% assign locksmith_9beb_forloop__rindex0 = locksmith_9beb_forloop__size | minus: locksmith_9beb_forloop__index0 | minus: 1 %}{% else %}{% continue %}{% endif -%}
                    {%- comment %}</locksmith:f474>{% endcomment -%}
                    {
                        "id": {{ variant.id | json }},
                        "title": {{ variant.title | json }},
                        "option1": {{ variant.option1 | json }},
                        "option2": {{ variant.option2 | json }},
                        "option3": {{ variant.option3 | json }},
                        "sku": {{ variant.sku | json }},
                        "requires_shipping": {{ variant.requires_shipping | json }},
                        "taxable": {{ variant.taxable | json }},
                        {%- if variant.featured_image -%}
                            "featured_image": {
                                "id": {{ variant.featured_image.id | json }},
                                "product_id": {{ product.id | json }},
                                "position": {{ variant.featured_image.position | json }},
                                "alt": {%- capture imageAlt -%}{%- render "ls-alt", image: variant.featured_image -%}{%- endcapture -%}{{ imageAlt | json }},
                                "width": {{ variant.featured_image.width | json }},
                                "height": {{ variant.featured_image.height | json }},
                                "src": {%- capture imageUrl -%}{%- render "ls-img-url", image: variant.featured_image, img_url: "master" -%}{%- endcapture -%}{{ imageUrl | json }},
                                "variant_ids": {{ variant.featured_image.variants | map: 'id' | json }}
                            }
                        {%- else-%}
                            "featured_image": null
                        {%- endif -%},
                        "available": {{ variant.available | json }},
                        "name": {{ product.title | append: "-" | append: variant.title | json }},
                        "public_title": {{ variant.title | json }},
                        "options": {{ variant.options | json }},
                        "price": {{ variant.price | json }},
                        "weight": {{ variant.weight | json }},
                        "compare_at_price": {{ variant.compare_at_price | json }},
                        "inventory_management": {{ variant.inventory_management | json }},
                        "barcode": {{ variant.barcode | json }}
                    }{%- if locksmith_9beb_forloop__last == false -%},{%- endif -%}
                {%- endfor -%}
            ],
            "images": [
                {%- comment %}<locksmith:bc70>{% endcomment -%}
                  {%- assign locksmith_9c77_forloop__size = 0 %}{%- for image in product.images -%}{% capture var %}{% render 'locksmith-variables', scope: 'subject', subject: image, subject_parent: product, variable: 'transparent' %}{% endcapture %}{% if var == 'true' %}{% assign locksmith_9c77_forloop__size = locksmith_9c77_forloop__size | plus: 1 %}{% endif %}{% endfor %}{% assign locksmith_9c77_forloop__index = nil -%}
                {%- comment %}</locksmith:bc70>{% endcomment -%}
                {%- for image in product.images -%}
                    {%- comment %}<locksmith:a027>{% endcomment -%}
                      {%- capture var %}{% render 'locksmith-variables', scope: 'subject', subject: image, subject_parent: product, variable: 'transparent' %}{% endcapture %}{% if var == "true" %}{% if locksmith_9c77_forloop__index == nil %}{% assign locksmith_9c77_forloop__index = 1 %}{% assign locksmith_9c77_forloop__index0 = 0 %}{% else %}{% assign locksmith_9c77_forloop__index = locksmith_9c77_forloop__index | plus: 1 %}{% assign locksmith_9c77_forloop__index0 = locksmith_9c77_forloop__index0 | plus: 1 %}{% endif %}{% if locksmith_9c77_forloop__index == 1 %}{% assign locksmith_9c77_forloop__first = true %}{% else %}{% assign locksmith_9c77_forloop__first = false %}{% endif %}{% if locksmith_9c77_forloop__index == locksmith_9c77_forloop__size %}{% assign locksmith_9c77_forloop__last = true %}{% else %}{% assign locksmith_9c77_forloop__last = false %}{% endif %}{% assign locksmith_9c77_forloop__rindex = locksmith_9c77_forloop__size | minus: locksmith_9c77_forloop__index | minus: 1 %}{% assign locksmith_9c77_forloop__rindex0 = locksmith_9c77_forloop__size | minus: locksmith_9c77_forloop__index0 | minus: 1 %}{% else %}{% continue %}{% endif -%}
                    {%- comment %}</locksmith:a027>{% endcomment -%}
                    {%- capture imageUrl -%}{%- render "ls-img-url", image: image, img_url: "master" -%}{%- endcapture -%}{{ imageUrl | json }}{%- if locksmith_9c77_forloop__last == false -%},{%- endif -%}
                {%- endfor -%}
            ],
            {%- if product.featured_image -%}
                "featured_image": {%- capture imageUrl -%}{%- render "ls-img-url", image: product.featured_image, img_url: "master" -%}{%- endcapture -%}{{ imageUrl | json }},
            {%- else -%}
                "featured_image": null,
            {%- endif -%}
            "options": {{ product.options | json }},
            "content": {{ product.content | json }}
        }
    {%- else -%}
        null
    {%- endif -%}
{%- endcapture -%}

{{ json | strip_newlines | replace: "	", "" | replace: "  ", "" }}