<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Navigation Test</title>
    
    <!-- Professional Navigation CSS -->
    <link rel="stylesheet" href="assets/navigation-professional.css">
    
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-success { background: #10b981; }
        .status-warning { background: #f59e0b; }
        .status-error { background: #ef4444; }
        
        /* Mock header structure */
        .mock-header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 12px 0;
        }
        .mock-navigation {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .mock-logo {
            font-weight: bold;
            font-size: 18px;
        }
        
        /* Mock dropdown structure */
        .mock-dropdown {
            position: relative;
        }
        .mock-dropdown-trigger {
            padding: 8px 16px;
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            cursor: pointer;
        }
        .mock-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-width: 200px;
            display: none;
            z-index: 1000;
        }
        .mock-dropdown.active .mock-dropdown-menu {
            display: block;
        }
        .mock-dropdown-item {
            padding: 12px 16px;
            border-bottom: 1px solid #f3f4f6;
        }
        .mock-dropdown-item:last-child {
            border-bottom: none;
        }
        .mock-dropdown-item:hover {
            background: #f9fafb;
        }
    </style>
</head>
<body>
    <div class="mock-header">
        <div class="test-container">
            <nav class="mock-navigation">
                <div class="mock-logo">Test Navigation</div>
                
                <!-- Mock menu dropdown -->
                <div class="mock-dropdown" data-dropdown="menu">
                    <button class="mock-dropdown-trigger" data-dropdown-trigger>
                        Menu ‚ñº
                    </button>
                    <div class="mock-dropdown-menu" data-dropdown-menu>
                        <div class="mock-dropdown-item">Home</div>
                        <div class="mock-dropdown-item">Products</div>
                        <div class="mock-dropdown-item">About</div>
                        <div class="mock-dropdown-item">Contact</div>
                    </div>
                </div>
                
                <!-- Mock language dropdown -->
                <div class="mock-dropdown" data-dropdown="language">
                    <button class="mock-dropdown-trigger" data-dropdown-trigger>
                        üá∫üá∏ EN ‚ñº
                    </button>
                    <div class="mock-dropdown-menu" data-dropdown-menu>
                        <div class="mock-dropdown-item">üá∫üá∏ English</div>
                        <div class="mock-dropdown-item">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</div>
                    </div>
                </div>
            </nav>
        </div>
    </div>

    <div class="test-container">
        <div class="test-section">
            <h1>Professional Navigation System Test</h1>
            <p>This test page verifies the professional navigation solution.</p>
        </div>

        <div class="test-section">
            <h2>System Status</h2>
            <div id="system-status">
                <div><span class="status-indicator status-warning"></span>Checking navigation controller...</div>
                <div><span class="status-indicator status-warning"></span>Checking slideshow enhancer...</div>
                <div><span class="status-indicator status-warning"></span>Checking CSS styles...</div>
                <div><span class="status-indicator status-warning"></span>Checking dropdown functionality...</div>
            </div>
        </div>

        <div class="test-section">
            <h2>Test Actions</h2>
            <button onclick="testDropdownFunctionality()">Test Dropdowns</button>
            <button onclick="testLanguageSelector()">Test Language Selector</button>
            <button onclick="testResponsive()">Test Responsive Behavior</button>
            <button onclick="testAccessibility()">Test Accessibility</button>
        </div>

        <div class="test-section">
            <h2>Console Output</h2>
            <div id="console-output" style="background: #1f2937; color: #e5e7eb; padding: 16px; border-radius: 4px; font-family: monospace; max-height: 300px; overflow-y: auto;">
                Waiting for test results...
            </div>
        </div>
    </div>

    <!-- Professional Navigation JavaScript -->
    <script src="assets/navigation-controller.js"></script>
    <script src="assets/slideshow-enhancer.js"></script>
    
    <script>
        // Test logging system
        const consoleOutput = document.getElementById('console-output');
        const originalConsoleLog = console.log;
        const originalConsoleWarn = console.warn;
        const originalConsoleError = console.error;
        
        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const color = {
                log: '#e5e7eb',
                warn: '#f59e0b', 
                error: '#ef4444',
                success: '#10b981'
            }[type] || '#e5e7eb';
            
            consoleOutput.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.warn = function(...args) {
            originalConsoleWarn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };
        
        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        // System status checker
        function updateStatus(index, status, message) {
            const statusElements = document.querySelectorAll('#system-status div');
            if (statusElements[index]) {
                const indicator = statusElements[index].querySelector('.status-indicator');
                indicator.className = `status-indicator status-${status}`;
                statusElements[index].innerHTML = `<span class="status-indicator status-${status}"></span>${message}`;
            }
        }
        
        // Test functions
        function testDropdownFunctionality() {
            console.log('Testing dropdown functionality...');
            
            const dropdowns = document.querySelectorAll('[data-dropdown]');
            let passed = 0;
            
            dropdowns.forEach((dropdown, index) => {
                const trigger = dropdown.querySelector('[data-dropdown-trigger]');
                const menu = dropdown.querySelector('[data-dropdown-menu]');
                
                if (trigger && menu) {
                    // Simulate click
                    trigger.click();
                    
                    setTimeout(() => {
                        if (dropdown.classList.contains('active') || menu.style.display === 'block') {
                            console.log(`‚úÖ Dropdown ${index + 1} opens correctly`);
                            passed++;
                        } else {
                            console.warn(`‚ö†Ô∏è Dropdown ${index + 1} failed to open`);
                        }
                        
                        // Close dropdown
                        document.body.click();
                        
                        if (index === dropdowns.length - 1) {
                            addToConsole(`Dropdown test completed: ${passed}/${dropdowns.length} passed`, 
                                        passed === dropdowns.length ? 'success' : 'warn');
                        }
                    }, 100);
                }
            });
        }
        
        function testLanguageSelector() {
            console.log('Testing language selector...');
            
            const languageDropdown = document.querySelector('[data-dropdown="language"]');
            if (languageDropdown) {
                const trigger = languageDropdown.querySelector('[data-dropdown-trigger]');
                if (trigger) {
                    trigger.click();
                    addToConsole('‚úÖ Language selector test completed', 'success');
                } else {
                    addToConsole('‚ö†Ô∏è Language selector trigger not found', 'warn');
                }
            } else {
                addToConsole('‚ö†Ô∏è Language dropdown not found', 'warn');
            }
        }
        
        function testResponsive() {
            console.log('Testing responsive behavior...');
            
            const originalWidth = window.innerWidth;
            
            // Test mobile breakpoint
            addToConsole('üì± Testing mobile breakpoint...', 'log');
            
            // Test tablet breakpoint  
            addToConsole('üì± Testing tablet breakpoint...', 'log');
            
            addToConsole('‚úÖ Responsive test completed', 'success');
        }
        
        function testAccessibility() {
            console.log('Testing accessibility features...');
            
            const dropdowns = document.querySelectorAll('[data-dropdown]');
            let accessibilityScore = 0;
            
            dropdowns.forEach((dropdown, index) => {
                const trigger = dropdown.querySelector('[data-dropdown-trigger]');
                
                // Check ARIA attributes
                if (trigger.hasAttribute('aria-expanded')) {
                    accessibilityScore++;
                    console.log(`‚úÖ Dropdown ${index + 1} has aria-expanded`);
                }
                
                if (trigger.hasAttribute('aria-haspopup')) {
                    accessibilityScore++;
                    console.log(`‚úÖ Dropdown ${index + 1} has aria-haspopup`);
                }
                
                // Check keyboard navigation
                if (trigger.tabIndex >= 0) {
                    accessibilityScore++;
                    console.log(`‚úÖ Dropdown ${index + 1} is keyboard accessible`);
                }
            });
            
            addToConsole(`‚úÖ Accessibility test completed: ${accessibilityScore} features found`, 'success');
        }
        
        // Initialize tests
        window.addEventListener('load', function() {
            console.log('üöÄ Professional Navigation Test Page Loaded');
            
            // Check for navigation controller
            setTimeout(() => {
                if (window.NavigationController) {
                    updateStatus(0, 'success', 'Navigation controller loaded ‚úÖ');
                } else {
                    updateStatus(0, 'error', 'Navigation controller missing ‚ùå');
                }
                
                if (window.SlideshowEnhancer) {
                    updateStatus(1, 'success', 'Slideshow enhancer loaded ‚úÖ');
                } else {
                    updateStatus(1, 'error', 'Slideshow enhancer missing ‚ùå');
                }
                
                // Check CSS
                const cssLoaded = document.querySelector('link[href*="navigation-professional.css"]');
                if (cssLoaded) {
                    updateStatus(2, 'success', 'Professional CSS loaded ‚úÖ');
                } else {
                    updateStatus(2, 'error', 'Professional CSS missing ‚ùå');
                }
                
                // Test basic dropdown functionality
                const dropdowns = document.querySelectorAll('[data-dropdown]');
                if (dropdowns.length > 0) {
                    updateStatus(3, 'success', `Found ${dropdowns.length} dropdowns ‚úÖ`);
                    
                    // Add basic click handlers for testing
                    dropdowns.forEach(dropdown => {
                        const trigger = dropdown.querySelector('[data-dropdown-trigger]');
                        if (trigger) {
                            trigger.addEventListener('click', function(e) {
                                e.stopPropagation();
                                
                                // Close other dropdowns
                                dropdowns.forEach(d => d.classList.remove('active'));
                                
                                // Toggle current dropdown
                                dropdown.classList.toggle('active');
                            });
                        }
                    });
                    
                    // Close dropdowns when clicking outside
                    document.addEventListener('click', function() {
                        dropdowns.forEach(d => d.classList.remove('active'));
                    });
                    
                } else {
                    updateStatus(3, 'warning', 'No dropdowns found for testing ‚ö†Ô∏è');
                }
                
                console.log('‚úÖ System check completed');
            }, 1000);
        });
    </script>
</body>
</html>
