{% doc %}
  @prompt
    i want bar that have brands that are moving horizontally, the brand should connect to collection and the image get it form the collection, the brands image should be bigger and let me add at least 30 brand, make it 15 brand, and the images for brand should be bigger to better clearness and less padding for the bar to make narrow to show the brand image more bigger, make the bar less height, let control the bar hieght and brand image height alos add text field i can control the side of it, make the brand dynamic to let me decide how many brands i enter, offcourse the bar should be responsive, i want the brands to be dynamic, that is mean the brand should not be fixed number as now but i can add or remove brand number, its not showing collection image of the brand, i want bar header text i can control is postion center or left or right, i should control the header section padding and height, i should control the bar padding top and down

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-brand-bar-container-{{ ai_gen_id }} {
    width: 100%;
  }

  .ai-brand-bar-header-{{ ai_gen_id }} {
    padding: {{ block.settings.header_padding_top }}px {{ block.settings.header_padding_horizontal }}px {{ block.settings.header_padding_bottom }}px {{ block.settings.header_padding_horizontal }}px;
    text-align: {{ block.settings.header_alignment }};
    background-color: {{ block.settings.header_background_color }};
    height: {{ block.settings.header_height }}px;
    display: flex;
    align-items: center;
    justify-content: {{ block.settings.header_alignment }};
  }

  .ai-brand-bar-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.header_font_size }}px;
    color: {{ block.settings.header_text_color }};
    margin: 0;
    font-weight: {{ block.settings.header_font_weight }};
  }

  .ai-brand-bar-{{ ai_gen_id }} {
    width: 100%;
    overflow: hidden;
    background-color: {{ block.settings.background_color }};
    height: {{ block.settings.bar_height }}px;
    display: flex;
    align-items: center;
    border-top: {{ block.settings.border_thickness }}px solid {{ block.settings.border_color }};
    border-bottom: {{ block.settings.border_thickness }}px solid {{ block.settings.border_color }};
    padding: {{ block.settings.bar_padding_top }}px 0 {{ block.settings.bar_padding_bottom }}px 0;
    box-sizing: border-box;
  }

  .ai-brand-bar__track-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: {{ block.settings.brand_spacing }}px;
    animation: ai-brand-scroll-{{ ai_gen_id }} {{ block.settings.scroll_speed }}s linear infinite;
    width: max-content;
    height: 100%;
  }

  .ai-brand-bar__item-{{ ai_gen_id }} {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    height: {{ block.settings.brand_image_height }}px;
    opacity: {{ block.settings.brand_opacity | divided_by: 100.0 }};
    transition: opacity 0.3s ease;
  }

  .ai-brand-bar__item-{{ ai_gen_id }}:hover {
    opacity: 1;
  }

  .ai-brand-bar__link-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-decoration: none;
  }

  .ai-brand-bar__image-{{ ai_gen_id }} {
    max-height: 100%;
    max-width: {{ block.settings.brand_max_width }}px;
    width: auto;
    height: auto;
    object-fit: contain;
    filter: {{ block.settings.brand_filter }};
  }

  .ai-brand-bar__placeholder-{{ ai_gen_id }} {
    width: {{ block.settings.brand_max_width }}px;
    height: {{ block.settings.brand_image_height }}px;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    position: relative;
  }

  .ai-brand-bar__placeholder-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .ai-brand-bar__empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    font-size: {{ block.settings.text_size }}px;
    color: #666;
    text-align: center;
    white-space: nowrap;
  }

  @keyframes ai-brand-scroll-{{ ai_gen_id }} {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-100% /2));
    }
  }

  {% if block.settings.pause_on_hover %}
    .ai-brand-bar-{{ ai_gen_id }}:hover .ai-brand-bar__track-{{ ai_gen_id }} {
      animation-play-state: paused;
    }
  {% endif %}

  @media screen and (max-width: 749px) {
    .ai-brand-bar-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.header_font_size | times: 0.9 }}px;
    }

    .ai-brand-bar-header-{{ ai_gen_id }} {
      padding: {{ block.settings.header_padding_top | times: 0.8 }}px {{ block.settings.header_padding_horizontal | times: 0.8 }}px {{ block.settings.header_padding_bottom | times: 0.8 }}px {{ block.settings.header_padding_horizontal | times: 0.8 }}px;height: {{ block.settings.header_height | times: 0.8 }}px;
    }

    .ai-brand-bar-{{ ai_gen_id }} {
      height: {{ block.settings.bar_height | times: 0.8 }}px;padding: {{ block.settings.bar_padding_top | times: 0.8 }}px 0 {{ block.settings.bar_padding_bottom | times: 0.8 }}px 0;
    }

    .ai-brand-bar__item-{{ ai_gen_id }} {
      height: {{ block.settings.brand_image_height | times: 0.8 }}px;
    }

    .ai-brand-bar__image-{{ ai_gen_id }} {
      max-width: {{ block.settings.brand_max_width | times: 0.8 }}px;
    }

    .ai-brand-bar__placeholder-{{ ai_gen_id }} {
      width: {{ block.settings.brand_max_width | times: 0.8 }}px;
      height: {{ block.settings.brand_image_height | times: 0.8 }}px;
    }

    .ai-brand-bar__empty-state-{{ ai_gen_id }} {
      font-size: {{ block.settings.text_size | times: 0.9 }}px;
    }
  }

  @media screen and (max-width: 480px) {
    .ai-brand-bar-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.header_font_size | times: 0.8 }}px;
    }

    .ai-brand-bar-header-{{ ai_gen_id }} {
      padding: {{ block.settings.header_padding_top | times: 0.7 }}px {{ block.settings.header_padding_horizontal | times: 0.7 }}px {{ block.settings.header_padding_bottom | times: 0.7 }}px {{ block.settings.header_padding_horizontal | times: 0.7 }}px;
      height: {{ block.settings.header_height | times: 0.7 }}px;
    }

    .ai-brand-bar-{{ ai_gen_id }} {
      height: {{ block.settings.bar_height | times: 0.7 }}px;
      padding: {{ block.settings.bar_padding_top | times: 0.7 }}px 0 {{ block.settings.bar_padding_bottom | times: 0.7 }}px 0;
    }

    .ai-brand-bar__item-{{ ai_gen_id }} {
      height: {{ block.settings.brand_image_height | times: 0.7 }}px;
    }

    .ai-brand-bar__image-{{ ai_gen_id }} {
      max-width: {{ block.settings.brand_max_width | times: 0.7 }}px;
    }

    .ai-brand-bar__placeholder-{{ ai_gen_id }} {
      width: {{ block.settings.brand_max_width | times: 0.7 }}px;
      height: {{ block.settings.brand_image_height | times: 0.7 }}px;
    }

    .ai-brand-bar__track-{{ ai_gen_id }} {
      gap: {{ block.settings.brand_spacing | times: 0.8 }}px;
    }
  }
{% endstyle %}<div class="ai-brand-bar-container-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.header_text != blank %}
    <div class="ai-brand-bar-header-{{ ai_gen_id }}">
      <h2 class="ai-brand-bar-title-{{ ai_gen_id }}">{{ block.settings.header_text }}</h2>
    </div>
  {% endif %}<div class="ai-brand-bar-{{ ai_gen_id }}">
    <div class="ai-brand-bar__track-{{ ai_gen_id }}">
      {% assign brands_added = 0 %}
      
      {% for collection in block.settings.brand_list %}
        {% if collection != blank %}
          {% assign brands_added = brands_added | plus: 1 %}
          <div class="ai-brand-bar__item-{{ ai_gen_id }}">
            <a href="{{ collection.url }}" class="ai-brand-bar__link-{{ ai_gen_id }}">
              {% if collection.featured_image %}
                <img
                  src="{{ collection.featured_image | image_url: width: 400 }}"
                  alt="{{ collection.title | escape }}"
                  class="ai-brand-bar__image-{{ ai_gen_id }}"
                  loading="lazy"
                  width="{{ collection.featured_image.width }}"
                  height="{{ collection.featured_image.height }}"
                >
              {% elsif collection.products.first.featured_image %}
                <img
                  src="{{ collection.products.first.featured_image | image_url: width: 400 }}"
                  alt="{{ collection.title | escape }}"
                  class="ai-brand-bar__image-{{ ai_gen_id }}"
                  loading="lazy"
                  width="{{ collection.products.first.featured_image.width }}"
                  height="{{ collection.products.first.featured_image.height }}"
                >
              {% else %}
                <div class="ai-brand-bar__placeholder-{{ ai_gen_id }}">
                  {{ 'collection-1' | placeholder_svg_tag }}<div class="ai-brand-bar__empty-state-{{ ai_gen_id }}">
                    {{ collection.title }}
                  </div>
                </div>
              {% endif %}
            </a>
          </div>
        {% endif %}
      {% endfor %}

      {% if brands_added == 0 %}
        {% for i in (1..5) %}
          <div class="ai-brand-bar__item-{{ ai_gen_id }}">
            <div class="ai-brand-bar__placeholder-{{ ai_gen_id }}">
              {{ 'collection-1' | placeholder_svg_tag }}
              <div class="ai-brand-bar__empty-state-{{ ai_gen_id }}">
                Add brand {{ i }}
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        {% for collection in block.settings.brand_list %}
          {% if collection != blank %}
            <div class="ai-brand-bar__item-{{ ai_gen_id }}">
              <a href="{{ collection.url }}" class="ai-brand-bar__link-{{ ai_gen_id }}">
                {% if collection.featured_image %}
                  <img
                    src="{{ collection.featured_image | image_url: width: 400 }}"
                    alt="{{ collection.title | escape }}"
                    class="ai-brand-bar__image-{{ ai_gen_id }}"
                    loading="lazy"
                    width="{{ collection.featured_image.width }}"
                    height="{{ collection.featured_image.height }}"
                  >
                {% elsif collection.products.first.featured_image %}
                  <img
                    src="{{ collection.products.first.featured_image | image_url: width: 400 }}"
                    alt="{{ collection.title | escape }}"
                    class="ai-brand-bar__image-{{ ai_gen_id }}"
                    loading="lazy"
                    width="{{ collection.products.first.featured_image.width }}"
                    height="{{ collection.products.first.featured_image.height }}"
                  >
                {% else %}
                  <div class="ai-brand-bar__placeholder-{{ ai_gen_id }}">
                    {{ 'collection-1' | placeholder_svg_tag }}
                    <div class="ai-brand-bar__empty-state-{{ ai_gen_id }}">
                      {{ collection.title }}
                    </div>
                  </div>
                {% endif %}
              </a>
            </div>
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Moving brands bar",
  "settings": [
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "text",
      "id": "header_text",
      "label": "Header text",
      "default": "Our Brands"
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Header alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "header_font_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Header font size",
      "default": 24
    },
    {
      "type": "select",
      "id": "header_font_weight",
      "label": "Header font weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600"
    },
    {
      "type": "range",
      "id": "header_height",
      "min": 40,
      "max": 120,
      "step": 5,
      "unit": "px",
      "label": "Header height",
      "default": 60
    },
    {
      "type": "range",
      "id": "header_padding_top",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Header top padding",
      "default": 15
    },
    {
      "type": "range",
      "id": "header_padding_bottom",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Header bottom padding",
      "default": 15
    },
    {
      "type": "range",
      "id": "header_padding_horizontal",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Header horizontal padding",
      "default": 20
    },
    {
      "type": "color",
      "id": "header_text_color",
      "label": "Header text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "header_background_color",
      "label": "Header background color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Brand collections"
    },
    {
      "type": "collection_list",
      "id": "brand_list",
      "label": "Brand collections",
      "limit": 30,
      "info": "Select collections to display as brand logos. Each collection's featured image will be used as the brand logo."
    },
    {
      "type": "header",
      "content": "Animation"
    },
    {
      "type": "range",
      "id": "scroll_speed",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "s",
      "label": "Scroll speed",
      "default": 30
    },
    {
      "type": "checkbox",
      "id": "pause_on_hover",
      "label": "Pause on hover",
      "default": true
    },
    {
      "type": "header",
      "content": "Bar dimensions"
    },
    {
      "type": "range",
      "id": "bar_height",
      "min": 50,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Bar height",
      "default": 80
    },
    {
      "type": "range",
      "id": "bar_padding_top",
      "min": 0,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Bar top padding",
      "default": 10
    },
    {
      "type": "range",
      "id": "bar_padding_bottom",
      "min": 0,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Bar bottom padding",
      "default": 10
    },
    {
      "type": "range",
      "id": "brand_image_height",
      "min": 30,
      "max": 150,
      "step": 5,
      "unit": "px",
      "label": "Brand image height",
      "default": 60
    },
    {
      "type": "range",
      "id": "brand_max_width",
      "min": 80,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Brand max width",
      "default": 120
    },
    {
      "type": "range",
      "id": "brand_spacing",
      "min": 15,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Brand spacing",
      "default": 25
    },
    {
      "type": "header",
      "content": "Brand styling"
    },
    {
      "type": "range",
      "id": "brand_opacity",
      "min": 30,
      "max": 100,
      "step": 10,
      "unit": "%",
      "label": "Brand opacity",
      "default": 70
    },
    {
      "type": "select",
      "id": "brand_filter",
      "label": "Brand filter",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "grayscale(100%)",
          "label": "Grayscale"
        },
        {
          "value": "brightness(0)",
          "label": "Black"
        },
        {
          "value": "sepia(100%)",
          "label": "Sepia"
        }
      ],
      "default": "grayscale(100%)"
    },
    {
      "type": "range",
      "id": "text_size",
      "min": 8,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Text size",
      "default": 10
    },
    {
      "type": "header",
      "content": "Section styling"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f8f8f8"
    },
    {
      "type": "range",
      "id": "border_thickness",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Border thickness",
      "default": 1
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#e0e0e0"
    }
  ],
  "presets": [
    {
      "name": "Moving brands bar"
    }
  ],
  "tag": null
}
{% endschema %}