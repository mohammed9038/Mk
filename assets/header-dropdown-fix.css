/*
* Desktop Dropdown Hover - Definitive Fix
* This file contains all necessary styles for the hover dropdown functionality.
*/
@media screen and (min-width: 990px) {
  /* Ensure the list item containing the dropdown is the positioning context */
  .header__inline-menu > .list-menu > li {
    position: relative;
  }

  /* Hide the submenu by default using a robust method */
  .header__inline-menu .header__submenu {
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
    transform: translateY(10px) !important;
    transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s step-end !important;
    transition-delay: 0.1s; /* Delay hiding slightly */

    /* Positioning and base styles */
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    z-index: 100 !important;
    min-width: 220px;
    padding: 1rem 0 !important;
    background-color: rgb(var(--color-background));
    border-radius: var(--popup-corner-radius);
    border: 1px solid rgba(var(--color-foreground), 0.1);
    box-shadow: var(--popup-shadow-horizontal-offset) var(--popup-shadow-vertical-offset) var(--popup-shadow-blur-radius) rgba(var(--color-shadow), var(--popup-shadow-opacity));
  }

  /* --- The core hover logic --- */
  /* When hovering the parent li, show the direct child submenu */
  .header__inline-menu > .list-menu > li:hover > header-menu > details > .header__submenu {
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: auto !important;
    transform: translateY(0) !important;
    transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s step-start !important;
  }

  /* Keep the caret rotated when the menu is open on hover */
  .header__inline-menu > .list-menu > li:hover > header-menu > details > summary .icon-caret {
    transform: rotate(180deg);
  }

  /* Style submenu links for better appearance */
  .header__submenu .header__menu-item {
    padding: 0.8rem 1.5rem;
    justify-content: space-between;
  }
  .header__submenu .header__menu-item:hover {
    background-color: rgba(var(--color-foreground), 0.04);
  }

  /* Hide the default <details> marker */
  .header__inline-menu summary::-webkit-details-marker {
    display: none;
  }
  .header__inline-menu summary::marker {
    display: none;
  }
}
