/* Desktop Navigation Dropdown - Universal Solution */
@media screen and (min-width: 990px) {
  
  /* Make sure all menu containers are properly positioned */
  .header__inline-menu,
  .header__navigation .list-menu--inline,
  .list-menu--inline {
    position: relative;
  }
  
  /* Target all possible menu item containers */
  .header__inline-menu li,
  .header__navigation li,
  .list-menu--inline > li,
  header-menu {
    position: relative !important;
  }
  
  /* Hide all dropdowns by default */
  .header__submenu,
  .list-menu--disclosure,
  .mega-menu__content,
  details:not([open]) .header__submenu,
  details:not([open]) .list-menu--disclosure {
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateY(-10px) !important;
    transition: all 0.3s ease !important;
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    background: rgb(var(--color-background)) !important;
    border: 1px solid rgba(var(--color-border), 0.1) !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1) !important;
    z-index: 1000 !important;
    min-width: 200px !important;
    padding: 8px 0 !important;
    margin: 0 !important;
  }
  
  /* Show dropdowns on hover - Multiple targeting approaches */
  .header__inline-menu li:hover .header__submenu,
  .header__inline-menu li:hover .list-menu--disclosure,
  .header__navigation li:hover .header__submenu,
  .header__navigation li:hover .list-menu--disclosure,
  .list-menu--inline > li:hover .header__submenu,
  .list-menu--inline > li:hover .list-menu--disclosure,
  header-menu:hover .header__submenu,
  header-menu:hover .list-menu--disclosure,
  header-menu:hover details .header__submenu,
  header-menu:hover details .list-menu--disclosure,
  .header__inline-menu li:hover details .header__submenu,
  .header__inline-menu li:hover details .list-menu--disclosure {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
    display: block !important;
  }
  
  /* Force display on hover even for closed details */
  header-menu:hover details:not([open]) .header__submenu,
  header-menu:hover details:not([open]) .list-menu--disclosure,
  .header__inline-menu li:hover details:not([open]) .header__submenu,
  .header__inline-menu li:hover details:not([open]) .list-menu--disclosure,
  .list-menu--inline > li:hover details:not([open]) .header__submenu,
  .list-menu--inline > li:hover details:not([open]) .list-menu--disclosure {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
  }
  
  /* Override any hiding styles */
  .header__inline-menu li:hover .header__submenu[hidden],
  .header__inline-menu li:hover .list-menu--disclosure[hidden],
  header-menu:hover .header__submenu[hidden],
  header-menu:hover .list-menu--disclosure[hidden] {
    display: block !important;
  }
  
  /* Style dropdown items */
  .header__submenu li,
  .list-menu--disclosure li {
    display: block !important;
    border-bottom: 1px solid rgba(var(--color-border), 0.05) !important;
    margin: 0 !important;
  }
  
  .header__submenu li:last-child,
  .list-menu--disclosure li:last-child {
    border-bottom: none !important;
  }
  
  /* Style dropdown links */
  .header__submenu a,
  .list-menu--disclosure a,
  .header__submenu .header__menu-item,
  .list-menu--disclosure .header__menu-item {
    display: block !important;
    padding: 12px 20px !important;
    color: rgb(var(--color-foreground)) !important;
    text-decoration: none !important;
    font-size: 14px !important;
    font-weight: 400 !important;
    transition: all 0.2s ease !important;
    border: none !important;
    background: transparent !important;
    width: 100% !important;
    text-align: left !important;
  }
  
  .header__submenu a:hover,
  .list-menu--disclosure a:hover,
  .header__submenu .header__menu-item:hover,
  .list-menu--disclosure .header__menu-item:hover {
    background: rgba(var(--color-base-accent-1), 0.08) !important;
    color: rgb(var(--color-base-accent-1)) !important;
    padding-left: 24px !important;
  }
  
  /* Arrow rotation */
  .header__menu-item svg,
  .list-menu__item svg {
    transition: transform 0.2s ease !important;
  }
  
  .header__inline-menu li:hover .header__menu-item svg,
  .header__navigation li:hover .header__menu-item svg,
  header-menu:hover .header__menu-item svg,
  .list-menu--inline > li:hover .list-menu__item svg {
    transform: rotate(180deg) !important;
  }
  
  /* Remove details markers */
  details summary::-webkit-details-marker,
  details summary::marker {
    display: none !important;
  }
  
  /* Multi-level dropdowns */
  .header__submenu .header__submenu,
  .list-menu--disclosure .header__submenu,
  .header__submenu .list-menu--disclosure,
  .list-menu--disclosure .list-menu--disclosure {
    left: 100% !important;
    top: 0 !important;
    margin-left: 8px !important;
  }
  
  /* Focus states for accessibility */
  .header__inline-menu li:focus-within .header__submenu,
  .header__inline-menu li:focus-within .list-menu--disclosure,
  header-menu:focus-within .header__submenu,
  header-menu:focus-within .list-menu--disclosure {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
    display: block !important;
  }
  
  /* Ensure top-level menu items have proper spacing */
  .header__inline-menu .header__menu-item,
  .header__navigation .header__menu-item,
  .list-menu--inline .list-menu__item {
    position: relative !important;
    padding: 8px 16px !important;
  }
}
