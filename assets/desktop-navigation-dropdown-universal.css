/* Desktop Navigation Dropdown - Enhanced Native Theme Support */
@media screen and (min-width: 990px) {
  
  /* Only apply hover effects when menu_type_desktop is dropdown */
  /* This enhances the existing theme dropdown functionality */
  
  /* Improve the native dropdown positioning */
  .header__inline-menu li,
  .header__inline-menu header-menu,
  .header__inline-menu header-menu > details {
    position: relative !important;
  }
  
  /* Add hover states to the existing theme dropdown structure */
  .header__inline-menu li:hover header-menu > details:not([open]) > .header__submenu,
  .header__inline-menu header-menu:hover > details:not([open]) > .header__submenu {
    opacity: 1 !important;
    transform: translateY(0) !important;
    animation: animateMenuOpen var(--duration-default) ease !important;
    animation-fill-mode: forwards !important;
    z-index: 1 !important;
    visibility: visible !important;
    display: block !important;
  }
  
  /* Ensure submenu is properly positioned for hover */
  .header__inline-menu header-menu > details:not([open]) > .header__submenu {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    opacity: 0 !important;
    visibility: hidden !important;
  }
  
  /* Keep submenu visible when hovering over it */
  .header__inline-menu li:hover .header__submenu:hover,
  .header__inline-menu header-menu > details:not([open]) > .header__submenu:hover {
    opacity: 1 !important;
    transform: translateY(0) !important;
    visibility: visible !important;
  }
  
  /* Enhanced focus states for accessibility */
  .header__inline-menu li:focus-within header-menu > details:not([open]) > .header__submenu,
  .header__inline-menu header-menu:focus-within > details:not([open]) > .header__submenu {
    opacity: 1 !important;
    transform: translateY(0) !important;
    animation: animateMenuOpen var(--duration-default) ease !important;
    animation-fill-mode: forwards !important;
    z-index: 1 !important;
    visibility: visible !important;
  }
  
  /* Ensure arrows rotate on hover */
  .header__inline-menu li:hover .icon-caret,
  .header__inline-menu header-menu:hover .icon-caret {
    transform: rotate(180deg) !important;
    transition: transform 0.2s ease !important;
  }
  
  /* Improve the submenu styling to match theme */
  .header__inline-menu .header__submenu {
    background: rgb(var(--color-background)) !important;
    border-radius: var(--popup-corner-radius) !important;
    border-color: rgba(var(--color-foreground), var(--popup-border-opacity)) !important;
    border-style: solid !important;
    border-width: var(--popup-border-width) !important;
    box-shadow: var(--popup-shadow-horizontal-offset) var(--popup-shadow-vertical-offset) var(--popup-shadow-blur-radius)
      rgba(var(--color-shadow), var(--popup-shadow-opacity)) !important;
    min-width: 200px !important;
  }
  
  /* Multi-level dropdown support */
  .header__submenu .header__submenu {
    left: 100% !important;
    top: 0 !important;
    margin-left: 8px !important;
  }
  
  /* Handle nested hover states */
  .header__submenu li:hover .header__submenu {
    opacity: 1 !important;
    transform: translateY(0) !important;
    visibility: visible !important;
  }
  
  /* Prevent text selection on hover */
  .header__inline-menu .header__menu-item {
    user-select: none !important;
  }
}
