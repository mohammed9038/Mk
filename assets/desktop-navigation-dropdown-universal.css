/* Desktop Navigation Dropdown - Universal Hover Support */
@media screen and (min-width: 990px) {
  
  /* Reset and prepare dropdown structure */
  .header__inline-menu details {
    position: relative !important;
  }
  
  /* Hide dropdown by default but prepare for hover */
  .header__inline-menu details .header__submenu {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateY(-10px) !important;
    transition: all 0.3s ease !important;
    pointer-events: none !important;
    z-index: 999 !important;
    
    /* Styling */
    background: rgb(var(--color-background)) !important;
    border: 1px solid rgba(var(--color-foreground), 0.1) !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
    min-width: 200px !important;
    padding: 0.5rem 0 !important;
  }
  
  /* Show dropdown on hover - multiple selectors for compatibility */
  .header__inline-menu details:hover .header__submenu,
  .header__inline-menu li:hover details .header__submenu,
  .header__inline-menu header-menu:hover details .header__submenu,
  .header__inline-menu details[open] .header__submenu,
  .header__submenu:hover {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
    pointer-events: auto !important;
  }
  
  /* Keep dropdown open when hovering over the parent */
  .header__inline-menu details:hover,
  .header__inline-menu li:hover,
  .header__inline-menu header-menu:hover {
    position: relative !important;
  }
  
  /* Prevent details from closing on hover */
  .header__inline-menu details summary {
    cursor: pointer !important;
    user-select: none !important;
  }
  
  /* Rotate caret on hover */
  .header__inline-menu details:hover summary .icon-caret,
  .header__inline-menu li:hover summary .icon-caret {
    transform: rotate(180deg) !important;
    transition: transform 0.2s ease !important;
  }
  
  /* Style submenu links */
  .header__submenu a {
    display: block !important;
    padding: 0.75rem 1.5rem !important;
    color: rgb(var(--color-foreground)) !important;
    text-decoration: none !important;
    transition: background-color 0.2s ease !important;
  }
  
  .header__submenu a:hover {
    background-color: rgba(var(--color-foreground), 0.05) !important;
  }
  
  /* Create invisible bridge to prevent dropdown from closing */
  .header__inline-menu details::after {
    content: '' !important;
    position: absolute !important;
    top: 90% !important;
    left: 0 !important;
    right: 0 !important;
    height: 20px !important;
    background: transparent !important;
    z-index: 998 !important;
  }
  
  /* Force details to stay "open" visually on hover */
  .header__inline-menu details:hover > summary::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 997 !important;
  }
  
  /* Multi-level dropdown support */
  .header__submenu .header__submenu {
    left: 100% !important;
    top: 0 !important;
    margin-left: 8px !important;
  }
  
  /* Handle nested hover states */
  .header__submenu li:hover .header__submenu {
    opacity: 1 !important;
    transform: translateY(0) !important;
    visibility: visible !important;
  }
}

/* Debug mode - uncomment to see dropdown boundaries */
/*
@media screen and (min-width: 990px) {
  .header__submenu {
    border: 2px solid red !important;
  }
  
  .header__inline-menu details {
    border: 2px solid blue !important;
  }
  
  .header__inline-menu details[open] {
    border-color: green !important;
  }
}
*/

/* === CUSTOM DROPDOWN STRUCTURE SUPPORT === */
@media screen and (min-width: 990px) {
  
  /* Support for pro-nav-submenu structure */
  details.pro-nav-submenu {
    position: relative !important;
  }
  
  .pro-submenu-content,
  .pro-submenu-list {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateY(-10px) !important;
    transition: all 0.3s ease !important;
    pointer-events: none !important;
    z-index: 999 !important;
    
    /* Styling */
    background: white !important;
    border: 1px solid #e0e0e0 !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
    min-width: 200px !important;
    padding: 10px 0 !important;
    margin-top: 5px !important;
  }
  
  /* Show dropdown on hover */
  details.pro-nav-submenu[open] .pro-submenu-content,
  details.pro-nav-submenu:hover .pro-submenu-content,
  details.pro-nav-submenu[open] .pro-submenu-list,
  details.pro-nav-submenu:hover .pro-submenu-list,
  .pro-submenu-content:hover,
  .pro-submenu-list:hover,
  li:hover details.pro-nav-submenu .pro-submenu-content,
  li:hover details.pro-nav-submenu .pro-submenu-list {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
    pointer-events: auto !important;
    display: block !important;
  }
  
  /* Style pro-submenu links */
  .pro-submenu-list a,
  .pro-submenu-content a {
    display: block !important;
    padding: 10px 20px !important;
    color: #333 !important;
    text-decoration: none !important;
    transition: background-color 0.2s ease !important;
  }
  
  .pro-submenu-list a:hover,
  .pro-submenu-content a:hover {
    background-color: #f5f5f5 !important;
    color: #000 !important;
  }
  
  /* Ensure parent nav items have relative positioning */
  nav[role="navigation"] li,
  .top-nav__item,
  .pro-nav-item {
    position: relative !important;
  }
  
  /* Create hover bridge for pro-nav structure */
  details.pro-nav-submenu::after {
    content: '' !important;
    position: absolute !important;
    top: 90% !important;
    left: 0 !important;
    right: 0 !important;
    height: 20px !important;
    background: transparent !important;
    z-index: 998 !important;
  }
}
