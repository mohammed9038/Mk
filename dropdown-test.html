<!DOCTYPE html>
<html>
<head>
    <title>Dropdown Test</title>
    <style>
        /* Simulating the problematic base.css rule */
        .js details > .header__submenu {
            opacity: 0;
            transform: translateY(-1.5rem);
        }
        
        /* Our fix */
        @media screen and (min-width: 990px) {
            .js .header__inline-menu header-menu:hover details > .header__submenu,
            .js .header__inline-menu header-menu details[open] > .header__submenu,
            .js .header__inline-menu header-menu details.force-open > .header__submenu {
                opacity: 1 !important;
                visibility: visible !important;
                transform: translateY(0) !important;
                pointer-events: auto !important;
                animation: none !important;
            }
            
            .header__inline-menu header-menu {
                position: relative !important;
            }
            
            .js .header__inline-menu details > .header__submenu {
                position: absolute !important;
                top: 100% !important;
                left: 0 !important;
                background: white !important;
                border: 1px solid #ddd !important;
                border-radius: 8px !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
                min-width: 200px !important;
                padding: 0.5rem 0 !important;
            }
        }
        
        /* Basic styling */
        .header__inline-menu {
            padding: 20px;
        }
        
        .list-menu--inline {
            display: flex;
            list-style: none;
            gap: 20px;
            margin: 0;
            padding: 0;
        }
        
        .header__menu-item {
            padding: 10px 15px;
            background: #f0f0f0;
            text-decoration: none;
            color: #333;
            cursor: pointer;
        }
        
        .header__submenu {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .header__submenu .header__menu-item {
            display: block;
            background: white;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body class="js">
    <nav class="header__inline-menu">
        <ul class="list-menu list-menu--inline">
            <li>
                <header-menu>
                    <details>
                        <summary class="header__menu-item">Products</summary>
                        <ul class="header__submenu">
                            <li><a href="#" class="header__menu-item">Phones</a></li>
                            <li><a href="#" class="header__menu-item">Tablets</a></li>
                            <li><a href="#" class="header__menu-item">Laptops</a></li>
                        </ul>
                    </details>
                </header-menu>
            </li>
            <li>
                <header-menu>
                    <details>
                        <summary class="header__menu-item">Services</summary>
                        <ul class="header__submenu">
                            <li><a href="#" class="header__menu-item">Support</a></li>
                            <li><a href="#" class="header__menu-item">Warranty</a></li>
                            <li><a href="#" class="header__menu-item">Repair</a></li>
                        </ul>
                    </details>
                </header-menu>
            </li>
        </ul>
    </nav>
    
    <script>
        console.log('Test page loaded');
        
        // Simulate our dropdown fix script
        document.addEventListener('DOMContentLoaded', function() {
            const menuItems = document.querySelectorAll('header-menu');
            console.log('Found menu items:', menuItems.length);
            
            menuItems.forEach(headerMenu => {
                const details = headerMenu.querySelector('details');
                const summary = headerMenu.querySelector('summary');
                const submenu = headerMenu.querySelector('.header__submenu');
                
                if (!details || !summary || !submenu) return;
                
                console.log('Setting up:', summary.textContent);
                
                // Prevent default click
                summary.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (details.hasAttribute('open')) {
                        details.removeAttribute('open');
                    } else {
                        details.setAttribute('open', '');
                    }
                });
                
                // Hover functionality
                headerMenu.addEventListener('mouseenter', function() {
                    console.log('Hover enter:', summary.textContent);
                    details.setAttribute('open', '');
                    details.classList.add('force-open');
                });
                
                headerMenu.addEventListener('mouseleave', function() {
                    console.log('Hover leave:', summary.textContent);
                    setTimeout(() => {
                        details.removeAttribute('open');
                        details.classList.remove('force-open');
                    }, 200);
                });
            });
        });
    </script>
</body>
</html>
